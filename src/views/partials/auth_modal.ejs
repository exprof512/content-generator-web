<div id="auth-modal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate__animated animate__fadeIn animate__faster">
    <div id="auth-modal-content" class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md relative">
        <button id="auth-modal-close" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>

        <div class="p-8">
            <!-- Login View -->
            <div id="login-view">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-6">Вход в аккаунт</h2>
                <form id="login-form">
                    <div class="space-y-4">
                        <div>
                            <label for="login-email" class="text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                            <input type="email" id="login-email" name="email" required class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                        <div>
                            <label for="login-password" class="text-sm font-medium text-gray-700 dark:text-gray-300">Пароль</label>
                            <input type="password" id="login-password" name="password" required class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                        <div class="flex justify-end">
                            <button type="button" id="show-forgot-password-view" class="text-sm font-medium text-purple-600 hover:underline dark:text-purple-400">Забыли пароль?</button>
                        </div>
                    </div>
                    <div class="min-h-[1.25rem] mt-2">
                        <p id="login-error" class="text-red-500 text-sm text-center"></p>
                    </div>
                    <button type="submit" class="w-full mt-4 px-4 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors">Войти</button>
                </form>
                <div class="my-6 flex items-center">
                    <div class="flex-grow border-t border-gray-300 dark:border-gray-600"></div>
                    <span class="flex-shrink mx-4 text-gray-500 dark:text-gray-400 text-sm">ИЛИ</span>
                    <div class="flex-grow border-t border-gray-300 dark:border-gray-600"></div>
                </div>
                <a href="<%= API_BASE_URL %>/auth/google/login" class="w-full flex items-center justify-center gap-3 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                    <img src="https://www.google.com/favicon.ico" alt="Google icon" class="w-5 h-5">
                    <span class="font-semibold text-gray-700 dark:text-gray-200">Войти через Google</span>
                </a>
                <p class="text-center text-sm mt-6">
                    Нет аккаунта? <button id="show-register-view" class="font-medium text-purple-600 hover:underline">Зарегистрироваться</button>
                </p>
            </div>

            <!-- Register View -->
            <div id="register-view" class="hidden">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-6">Создание аккаунта</h2>
                <form id="register-form">
                    <div class="space-y-4">
                        <div>
                            <label for="register-name" class="text-sm font-medium text-gray-700 dark:text-gray-300">Имя</label>
                            <input type="text" id="register-name" name="name" required class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                        <div>
                            <label for="register-email" class="text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                            <input type="email" id="register-email" name="email" required class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                        <div>
                            <label for="register-password" class="text-sm font-medium text-gray-700 dark:text-gray-300">Пароль (мин. 8 символов)</label>
                            <input type="password" id="register-password" name="password" required minlength="8" class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                        </div>
                    </div>
                    <div class="min-h-[1.25rem] mt-2">
                        <p id="register-error" class="text-red-500 text-sm text-center"></p>
                    </div>
                    <button type="submit" class="w-full mt-4 px-4 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors">Создать аккаунт</button>
                </form>
                <p class="text-center text-sm mt-6">
                    Уже есть аккаунт? <button id="show-login-view" class="font-medium text-purple-600 hover:underline">Войти</button>
                </p>
            </div>

            <!-- Forgot Password View -->
            <div id="forgot-password-view" class="hidden">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-6">Сброс пароля</h2>
                <p class="text-center text-sm text-gray-600 dark:text-gray-400 mb-4">Введите ваш email, и мы отправим вам ссылку для восстановления (проверьте консоль бэкенда).</p>
                <form id="forgot-password-form">
                    <div>
                        <label for="forgot-email" class="text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                        <input type="email" id="forgot-email" name="email" required class="w-full mt-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-purple-500 focus:border-purple-500">
                    </div>
                    <div class="min-h-[2.5rem] mt-2 flex items-center justify-center">
                        <p id="forgot-error" class="text-green-500 text-sm text-center"></p>
                    </div>
                    <button type="submit" class="w-full mt-4 px-4 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors">Отправить</button>
                </form>
                <p class="text-center text-sm mt-6">
                    <button id="back-to-login-view" class="font-medium text-purple-600 hover:underline dark:text-purple-400">← Назад ко входу</button>
                </p>
            </div>
        </div>
    </div>
</div>